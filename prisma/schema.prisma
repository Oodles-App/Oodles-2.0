generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = "postgresql://macbook:123noodles@localhost:5432/oodlesv2"
}

enum Business {
  ORGANIZATION
  RESTAURANT
}

model User {
  id        Int      @id @default(autoincrement())
  createdAt DateTime @default(now())
  email     String   @unique
  businessName  String  @unique
  username  String
  address   String
  contactNum  String
  biography String
  businessType Business 
  imageUrl  String
  is501c3 Boolean @default(false)
  tags Tag[]
  sentMessages      Message[]  @relation("sentMessages")
  receivedMessages  Message[]  @relation("receivedMessages") 
  products          Product[]
  reservations      Reservation[]
}

model Tag {
  id      Int         @id @default(autoincrement())
  name    String      @unique
  products Product[]
  users User[]
}

model Product {
  id      Int         @id @default(autoincrement())
	imageUrl		String
	user			  User    @relation(fields:[userId], references:[id])
  userId      Int
  name        String
  description String
  tags        Tag[]
}

enum Status {
  ACTIVE
  PENDING
  CONFIRM 
  COMPLETED
}

model Reservation {
  id          Int      @id @default(autoincrement())
  reserveTime DateTime @default(now())
  pickupTime Int
  status    Status
  user      User    @relation(fields:[userId], references:[id])
  userId      Int
}

model Message {
  id         Int    @id
  time      DateTime  @default(now())
  text       String
  sender     User   @relation(name: "sentMessages", fields: [senderId], references: [id])
  receiver   User   @relation(name: "receivedMessages", fields: [receiverId], references: [id])
  senderId   Int
  receiverId Int
}

model Article {
  id      Int  @id 
  title   String
  author  String
  url     String
}